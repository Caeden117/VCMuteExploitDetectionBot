using System;
using System.IO;
using System.Threading.Tasks;
using VCMuteExploitDetectionBot;
using VCMuteExploitDetectionBot.Configuration;

// Load our config file
var configLocation = Path.Combine(Environment.CurrentDirectory, ".env");

if (!File.Exists(configLocation))
{
    await Logger.Critical("Startup", "Config file does not exist.");
    return;
}

var config = await Config.DeserializeFromFile(configLocation);

if (config is null)
{
    await Logger.Critical("Startup", "Config could not be read. Please check that it is valid.");
    return;
}

// Start the bot, and delay the process indefinitely
await Startup.Start(config);
await Task.Delay(-1);